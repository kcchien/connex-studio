# Connex Studio UI/UX 改造設計文檔

**版本**: 1.0
**日期**: 2026-01-26
**狀態**: 設計完成，待實施

---

## 1. 執行摘要

### 1.1 背景

Connex Studio 是一個 IIoT 通訊測試平台，支援 Modbus TCP、MQTT 和 OPC UA 協議。目前的 UI/UX 存在以下問題：

- 視覺風格太基礎，缺乏專業感和品牌識別度
- 資訊架構混亂，導航層級不清晰
- 交互體驗不足，缺少動效和回饋
- 操作動線不直覺，建立連線和查看數據需要太多步驟

### 1.2 設計目標

- **3 秒連線**：最短路徑建立連線
- **1 次點擊看數據**：連線後立即進入數據探索
- **批量操作優先**：支援大量 Tag 的快速建立
- **現代工具美學**：參考 MQTTX 的設計語言，專業但友好

### 1.3 參考產品

- **MQTTX** (https://mqttx.app/)：聊天式介面、漸層美學、即連即看的體驗

---

## 2. 設計原則

| 原則 | 描述 |
|------|------|
| **連線為中心** | 所有操作圍繞連線展開，Tags 是連線的子集 |
| **即連即看** | 連線成功後直接進入數據探索，零額外步驟 |
| **漸進式揭露** | 預設簡單，進階選項收合，90% 情況不需要 |
| **批量是常態** | 一個一個建立是例外，匯入/掃描/批量生成才是主流 |
| **空白即邀請** | 空狀態永遠提供下一步行動，不是錯誤訊息 |

---

## 3. 資訊架構

### 3.1 導航結構重組

**舊結構（平行導航）**：
```
Sidebar
├── Connections
├── Tags
├── Dashboard
├── Alerts
├── Bridge
└── Calculator
```

**新結構（連線為中心）**：
```
Sidebar
├── [+ 新連線] ← 主要 CTA
├── 我的連線
│   ├── ● PLC-01 (Modbus)
│   ├── ● Broker (MQTT)
│   └── ○ OPC-Server (OPC UA)
├── 工具 (收合)
│   ├── Bridge
│   ├── Calculator
│   └── DVR
└── 設定 / 用戶
```

### 3.2 關鍵改變

| 舊設計 | 新設計 | 原因 |
|--------|--------|------|
| Connections 是頁面 | 連線列表在 Sidebar | 減少一層點擊 |
| Tags 是獨立頁面 | Tags 在連線內部 | Tags 屬於連線 |
| Dashboard 平行導航 | 移除 | 數據探索器即主畫面 |
| Alerts 平行導航 | 整合到連線狀態 | 上下文中顯示 |

### 3.3 點擊流程對比

**舊流程（查看 Tag 數據）**：
```
Connections → 選連線 → 進入 → Tags Tab → 找 Tag → 點開 = 5-6 次
```

**新流程**：
```
Sidebar 點連線 → 直接看到所有 Tags = 1 次
```

---

## 4. 核心畫面設計

### 4.1 連線建立流程

**設計目標**：3 秒連線，最少欄位

```
┌─────────────────────────────────────────────────┐
│  新增連線                                    ✕  │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐          │
│  │ Modbus  │ │  MQTT   │ │ OPC UA  │          │
│  │   TCP   │ │         │ │         │          │
│  └────●────┘ └─────────┘ └─────────┘          │
│                                                 │
│  連線名稱   [ __________________________ ]     │
│  位址       [ __________________________ ]     │
│                                                 │
│  ▶ 進階選項                                    │
│                                                 │
│            [ 測試連線 ]  [ ● 連線並探索 ]      │
└─────────────────────────────────────────────────┘
```

**設計決策**：
- 協議選擇用大按鈕，不用下拉選單
- 只需名稱 + 位址，其他智慧預設
- 進階選項收合（Unit ID、Timeout 等）
- 主要 CTA 是「連線並探索」，連上直接跳轉

### 4.2 數據探索器

**設計目標**：連上就能看，看到就能懂

```
┌────────────────────────────────────────────────────────────────┐
│  ← PLC-生產線A                ● 已連線  12ms    [ ⏹ 斷線 ]    │
├────────────────────────────────────────────────────────────────┤
│  ┌─ 快速操作 ─────────────────────────────────────────────┐   │
│  │  [ + 新增 Tag ]  [ ↓ 匯入 ]  [ 🔍 搜尋... ]            │   │
│  └────────────────────────────────────────────────────────┘   │
│                                                                │
│  ┌─ Tag 列表 ─────────────────────────────────────────────┐   │
│  │  NAME              ADDRESS    VALUE       TREND  STATUS │   │
│  │  ───────────────────────────────────────────────────────│   │
│  │  ● Temperature_01  HR:40001   23.5 °C    ┌~~┐   ✓ 正常  │   │
│  │  ● Pressure_Main   HR:40003   4.82 bar   ┌/‾┐   ⚠ 偏高  │   │
│  │  ○ Flow_Rate       HR:40005   ── ──      ┌──┐   ─ 離線  │   │
│  └────────────────────────────────────────────────────────┘   │
│                                                                │
│  ┌─ 選中 Tag 詳情 ────────────────────────────────────────┐   │
│  │  Pressure_Main                            [ 編輯 ] [⋯]  │   │
│  │  HR:40003 · FLOAT32 · 每 500ms 讀取                     │   │
│  │  ┌──────────────────────────────────────────────────┐   │   │
│  │  │    4.82 bar    ▲ +0.12       ╱‾‾╲___╱‾‾         │   │   │
│  │  └──────────────────────────────────────────────────┘   │   │
│  └────────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────────┘
```

**設計決策**：
- 頂部狀態列：連線名稱、狀態燈、延遲
- 內嵌 Sparkline：每個 Tag 都有迷你趨勢圖
- 狀態語意化：正常/偏高/離線，不只是數值
- 選中即展開：下方顯示詳情和大圖表

### 4.3 批量 Tag 管理

**設計目標**：批量是常態，手動是例外

**三種快速建立方式**：

#### 方式一：匯入 CSV/Excel
```
┌─────────────────────────────────────────────────────────────┐
│  匯入 Tags                                               ✕  │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐   │
│  │         將 CSV 或 Excel 檔案拖曳至此               │   │
│  │              或 [ 選擇檔案 ]                        │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  📎 下載範本：[ Modbus ] [ MQTT ] [ OPC UA ]               │
│                                                             │
│  預覽 (共 24 筆)                                           │
│  ✓  Temperature_01    HR:40001    FLOAT32    °C            │
│  ✓  Temperature_02    HR:40003    FLOAT32    °C            │
│  ⚠  InvalidTag        HR:99999    ???        ─             │
│                                                             │
│              [ 取消 ]  [ ● 匯入 23 筆有效 Tags ]           │
└─────────────────────────────────────────────────────────────┘
```

#### 方式二：自動掃描/發現
```
┌─────────────────────────────────────────────────────────────┐
│  自動發現 Tags                                           ✕  │
├─────────────────────────────────────────────────────────────┤
│  掃描範圍                                                   │
│  Modbus:  HR:40001 ──── HR:40100   [ 開始掃描 🔍 ]         │
│                                                             │
│  ══════════════════════════════════════ 67%                │
│                                                             │
│  發現 18 個有效點位                                         │
│  ☑  HR:40001    有回應    0x0017 (23)     [ 命名: ___ ]    │
│  ☑  HR:40002    有回應    0x0000 (0)      [ 命名: ___ ]    │
│  ☐  HR:40004    無回應    ─                                │
│                                                             │
│              [ 取消 ]  [ ● 加入選中的 15 個 Tags ]         │
└─────────────────────────────────────────────────────────────┘
```

#### 方式三：批量範圍生成
```
┌─────────────────────────────────────────────────────────────┐
│  批量生成 Tags                                           ✕  │
├─────────────────────────────────────────────────────────────┤
│  命名規則     [ Temp_Sensor_{N} ]                          │
│               預覽: Temp_Sensor_01, Temp_Sensor_02, ...    │
│                                                             │
│  起始位址     [ HR:40001 ]                                 │
│  數量         [ 20 ] 個                                    │
│  位址間隔     [ 2 ]                                        │
│  資料類型     [ FLOAT32 ▼ ]                                │
│                                                             │
│  ▶ 進階選項                                                │
│                                                             │
│              [ 取消 ]  [ ● 生成 20 個 Tags ]               │
└─────────────────────────────────────────────────────────────┘
```

### 4.4 空狀態設計

#### 首次啟動
```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│                    [品牌插圖：連接意象]                      │
│                                                              │
│                 歡迎使用 ConneX Studio                       │
│          連接你的第一個 IIoT 設備，開始探索數據             │
│                                                              │
│    ┌─────────────┐ ┌─────────────┐ ┌─────────────┐         │
│    │   Modbus    │ │    MQTT     │ │   OPC UA    │         │
│    │  ● 新增連線 │ │  ● 新增連線 │ │  ● 新增連線 │         │
│    └─────────────┘ └─────────────┘ └─────────────┘         │
│                                                              │
│              [ 匯入現有配置 ]    [ 查看示範 ]               │
└──────────────────────────────────────────────────────────────┘
```

#### 連線內無 Tags
```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│                        [插圖：空數據]                        │
│                                                              │
│                連線成功！但還沒有任何 Tags                   │
│                                                              │
│       ┌──────────────┐        ┌──────────────┐             │
│       │  🔍 自動掃描  │        │  + 手動新增  │             │
│       └──────────────┘        └──────────────┘             │
│                  ┌──────────────┐                           │
│                  │  ↓ 匯入 CSV  │                           │
│                  └──────────────┘                           │
└──────────────────────────────────────────────────────────────┘
```

---

## 5. 視覺風格規範

### 5.1 色彩系統

#### 品牌漸層
```
主漸層：#0066FF (Electric Blue) → #00D4AA (Teal Mint)
用途：Logo、主要 CTA、空狀態插圖、品牌標識
```

#### 協議識別色
| 協議 | 色碼 | 名稱 |
|------|------|------|
| Modbus | #14B8A6 | Teal |
| MQTT | #22C55E | Green |
| OPC UA | #8B5CF6 | Purple |

#### 狀態色（維持工業標準）
| 狀態 | 色碼 | 用途 |
|------|------|------|
| Connected | #10B981 | 連線成功 |
| Warning | #F59E0B | 警告/連線中 |
| Error | #EF4444 | 錯誤/斷線 |

### 5.2 背景層次 (Dark Mode)

| Level | 色碼 | 用途 |
|-------|------|------|
| 0 | #0A0E14 | 畫布底色，OLED 友好 |
| 1 | #111827 | 面板/卡片背景 |
| 2 | #1F2937 | Hover/選中狀態 |
| 3 | #374151 | 邊框/分隔線 |

### 5.3 按鈕層級

| 類型 | 樣式 | 用途 |
|------|------|------|
| Primary | 漸層背景 + 微光 shadow | 主要行動（連線、確認） |
| Secondary | 透明底 + 邊框 | 次要行動（取消、測試） |
| Danger | 紅色調 | 危險行動（斷線、刪除） |

### 5.4 微互動規範

| 元素 | 動效 | 時長 | 目的 |
|------|------|------|------|
| 連線狀態燈 | 呼吸脈動 | 2s loop | 表示「活著」 |
| 數值變化 | 顏色閃爍 → 淡出 | 500ms | 引起注意 |
| 面板展開 | 高度 ease-out | 200ms | 流暢感 |
| 按鈕 hover | 上移 2px + shadow | 150ms | 可點擊暗示 |
| 載入中 | 骨架屏 shimmer | - | 避免空白 |

---

## 6. 實施建議

### 6.1 分階段實施

| 階段 | 範圍 | 優先級 |
|------|------|--------|
| Phase 1 | 導航架構重組 + 連線流程 | P0 |
| Phase 2 | 數據探索器 + 批量 Tag | P0 |
| Phase 3 | 視覺風格升級 | P1 |
| Phase 4 | 空狀態 + 微互動 | P2 |

### 6.2 設計系統更新

需要更新的檔案：
- `design-system/ConnexStudio_ColorSchema_v1.md` → v2
- `design-system/themes/ConnexDarkTheme.axaml` → 新增漸層定義
- `design-main.pen` → 新版 UI 設計稿

### 6.3 技術考量

- **React 組件**：需重構 Sidebar、ConnectionCard、TagTable
- **Zustand Store**：導航狀態邏輯簡化
- **Tailwind**：新增漸層工具類和動畫類
- **效能**：Tag 列表虛擬滾動（100+ Tags）

---

## 7. 成功指標

| 指標 | 目標 |
|------|------|
| 新連線建立時間 | < 10 秒 |
| 首次看到數據點擊次數 | ≤ 2 次 |
| 批量匯入 50 Tags | < 30 秒 |
| 冷啟動到可操作 | < 5 秒 |

---

## 附錄

### A. 參考資源
- MQTTX: https://mqttx.app/
- MQTTX GitHub: https://github.com/emqx/MQTTX

### B. 相關文檔
- 現有色彩規範: `design-system/ConnexStudio_ColorSchema_v1.md`
- 現有設計稿: `design-main.pen`
- Logo: `src/renderer/assets/logo.svg`

---

*文檔結束*
